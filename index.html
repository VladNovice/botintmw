<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CRYPTO ASK Calculator</title>
  <style>
    :root {
      --color-bg: #000000;
      --color-text: #FFFFFF;
      --color-secondary-bg: #000000; /* Всегда чёрный фон */
      --color-secondary-text: #CCCCCC;
      --color-risk: #FF3B30;
      --color-profit: #34C759;
      --accent-start: #00c9ff;
      --accent-end: #92fe9d;
      --gradient-angle: 135deg;
      --shadow: rgba(0, 0, 0, 0);
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      background: var(--color-bg);
      color: var(--color-text);
      font-family: 'Segoe UI', Tahoma, sans-serif;
      min-height: 100vh;
      width: 100%;
      height: 100%;
    }
    /* Полноэкранный контейнер без рамок */
    .container {
      background: var(--color-secondary-bg);
      padding: 16px;
      width: 100%;
      height: 100%;
      overflow-y: auto;
    }
    .header { text-align: center; margin-bottom: 20px; }
    .header h1 { font-size: 2.4rem; background: linear-gradient(var(--gradient-angle), var(--accent-start), var(--accent-end)); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 8px; }
    .header p { font-size: 1rem; color: var(--color-secondary-text); }
    .main-nav { display: flex; gap: 10px; justify-content: center; margin-bottom: 16px; }
    .nav-btn { flex: 1; padding: 10px 14px; background: rgba(255, 255, 255, 0.05); border: none; border-radius: 50px; color: var(--color-text); cursor: pointer; font-weight: 500; transition: background 0.3s ease; }
    .nav-btn.active, .nav-btn:hover { background: linear-gradient(var(--gradient-angle), var(--accent-start), var(--accent-end)); color: #0f0f0f; }
    .section { display: none; animation: fadeIn 0.3s ease; }
    .section.active { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    .grid { display: grid; gap: 12px; }
    .grid-2 { grid-template-columns: 1fr 1fr; }
    input, select { width: 100%; padding: 14px; background: #1a1a1a; border: none; border-radius: 14px; color: var(--color-text); font-size: 1rem; }
    .btn { padding: 12px 20px; border-radius: 50px; background: linear-gradient(var(--gradient-angle), var(--accent-start), var(--accent-end)); color: #0e0e0e; font-weight: 600; border: none; font-size: 1rem; cursor: pointer; transition: transform 0.2s; }
    .btn:active { transform: scale(0.98); }
    .results { margin-top: 20px; background: rgba(255,255,255,0.05); padding: 16px; border-radius: 10px; text-align: center; font-size: 1rem; line-height: 1.5; }
    .actions { display: flex; flex-direction: column; gap: 16px; margin-top: 24px; }
    .btn-block { display: flex; align-items: center; gap: 12px; padding: 16px; background: #1a1a1a; border-radius: 16px; cursor: pointer; transition: transform 0.2s; }
    .btn-block:hover { transform: translateY(-2px); }
    .btn-block img { width: 32px; height: 32px; opacity: 0.9; }
    .btn-content { display: flex; flex-direction: column; flex-grow: 1; }
    .btn-content span { font-size: 1.2rem; font-weight: 600; }
    .btn-desc { font-size: 0.9rem; color: var(--color-secondary-text); margin-top: 4px; }
    .entry-item { display: grid; grid-template-columns: 1fr 1fr auto; gap: 8px; align-items: center; }
    .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: none; justify-content: center; align-items: center; z-index: 999; }
    .modal.active { display: flex; }
    .modal-content { background: var(--color-secondary-bg); padding: 20px; border-radius: 12px; max-width: 480px; width: 90%; color: var(--color-text); line-height: 1.5; }
    .modal-content h3 { margin-bottom: 12px; font-size: 1.4rem; }
    .modal-content p, .modal-content ul { font-size: 0.95rem; margin-bottom: 12px; }
    .modal-content a { color: var(--accent-start); text-decoration: none; font-weight: 600; }
    .modal-actions { display: flex; gap: 8px; justify-content: flex-end; margin-top: 12px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>CRYPTO ASK Calculator</h1>
      <p>Быстрый и точный расчёт для вашей стратегии</p>
    </div>

    <div class="main-nav">
      <button class="nav-btn active" onclick="showSection('avg', event)">Средняя точка</button>
      <button class="nav-btn" onclick="showSection('risk', event)">Риск/Объём</button>
    </div>

    <!-- Average Price Section -->
    <div id="avg" class="section active">
      <div class="grid">
        <div class="grid grid-2">
          <input type="number" id="newEntryPrice" placeholder="Цена входа" step="0.0001">
          <input type="number" id="newEntryAmount" placeholder="Объём" step="0.0001">
        </div>
        <div class="grid grid-2">
          <button class="btn" onclick="addEntry()">+ Добавить точку</button>
          <button class="btn" onclick="calculateAvg()">Рассчитать среднюю</button>
        </div>
        <div id="entries"></div>
      </div>
      <div id="avgResult" class="results"></div>
    </div>

    <!-- Risk & Position Section -->
    <div id="risk" class="section">
      <div class="grid">
        <select id="positionType">
          <option value="long">Long</option>
          <option value="short">Short</option>
        </select>
        <input type="number" id="deposit" placeholder="Депозит ($)">
        <input type="number" id="riskPercent" placeholder="Риск (%)" step="0.1">
        <input type="number" id="entryPrice" placeholder="Цена входа" step="0.0001">
        <input type="number" id="stopLoss" placeholder="Стоп-лосс" step="0.0001">
        <input type="number" id="takeProfit" placeholder="Тейк-профит" step="0.0001">
        <button class="btn" onclick="calculateRisk()">Рассчитать риск</button>
      </div>
      <div id="riskResult" class="results"></div>
    </div>

    <!-- Action Buttons -->
    <div class="actions">
      <div class="btn-block" onclick="window.open('https://t.me/cryptoaskgroup','_blank')">
        <img src="https://cdn.jsdelivr.net/npm/simple-icons@v6/icons/telegram.svg" alt="Telegram">
        <div class="btn-content">
          <span>✈️ CRYPTO ASK</span>
          <div class="btn-desc">Crypto news & Education community</div>
        </div>
      </div>
      <div class="btn-block" onclick="window.open('https://partner.bybit.com/b/askcrypto','_blank')">
        <img src="https://upload.wikimedia.org/wikipedia/commons/1/14/Bybit_Logo.svg" alt="Bybit">
        <div class="btn-content">
          <span>Bybit</span>
          <div class="btn-desc">регистрируйся по ссылке и забирай до 30000$ бонусов</div>
        </div>
      </div>
      <div class="btn-block" onclick="showModal('clubModal')">
        <img src="https://unpkg.com/heroicons@2.0.13/24/outline/users.svg" alt="Club">
        <div class="btn-content">
          <span>Закрытый торговый клуб</span>
          <div class="btn-desc">Аналитика, фьючерсные и спотовые сигналы, общение в кругу трейдеров</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Closed Club Modal -->
  <div class="modal" id="clubModal">
    <div class="modal-content">
      <h3>Как попасть в закрытый клуб?</h3>
      <p>Доступ в закрытый клуб возможен по подписке ИЛИ для моих активных рефералов абсолютно бесплатно.</p>
      <ul>
        <li><strong>По подписке:</strong> 15 $/мес.</li>
        <li><strong>Рефералам:</strong> регистрация на бирже Bybit <a href="https://partner.bybit.com/b/askcrypto">по моей партнерской ссылке</a> (при регистрации через мобильное приложение введите код <code>ASKCRYPTO</code>), депозит от 100 $ и активность.</li>
      </ul>
      <p>Если у вас уже есть аккаунт Bybit, вы можете перенести его под мою ссылку. Напишите мне в личные сообщения (<a href="https://t.me/yourprofile" target="_blank">мой профиль</a>), и я расскажу, как это сделать.</p>
      <div class="modal-actions">
        <button class="btn" onclick="hideModal('clubModal')">Закрыть</button>
        <button class="btn" onclick="window.open('https://partner.bybit.com/b/askcrypto','_blank')">Регистрация</button>
      </div>
    </div>
  </div>

  <script>
    let entries = [];
    function addEntry() {
      const price = parseFloat(document.getElementById('newEntryPrice').value);
      const amount = parseFloat(document.getElementById('newEntryAmount').value);
      if (isNaN(price) || price <= 0 || isNaN(amount) || amount <= 0) { alert('Введите корректные положительные значения'); return; }
      if (entries.length >= 5) { alert('Максимум 5 точек входа'); return; }
      entries.push({ price, amount }); document.getElementById('newEntryPrice').value = ''; document.getElementById('newEntryAmount').value = ''; renderEntries();
    }
    function renderEntries() { const container = document.getElementById('entries'); container.innerHTML = ''; entries.forEach((e, i) => { const div = document.createElement('div'); div.className = 'entry-item'; div.innerHTML = `<input type="number" value="${e.price}" step="0.0001" readonly><input type="number" value="${e.amount}" step="0.0001" readonly><button class="btn" onclick="removeEntry(${i})">Удалить</button>`; container.appendChild(div); }); }
    function removeEntry(idx) { entries.splice(idx, 1); renderEntries(); }
    function calculateAvg() { if (!entries.length) { alert('Добавьте хотя бы одну точку входа!'); return; } const totalValue = entries.reduce((sum, e) => sum + e.price * e.amount, 0); const totalAmount = entries.reduce((sum, e) => sum + e.amount, 0); const avg = totalValue / totalAmount; document.getElementById('avgResult').textContent = `Средняя точка входа: ${avg.toFixed(4)} (${entries.length} позиций)`;} 
    function calculateRisk() { const deposit = parseFloat(document.getElementById('deposit').value); const riskPercent = parseFloat(document.getElementById('riskPercent').value); const entryPrice = parseFloat(document.getElementById('entryPrice').value); const stopLoss = parseFloat(document.getElementById('stopLoss').value); const takeProfit = parseFloat(document.getElementById('takeProfit').value); if ([deposit, riskPercent, entryPrice, stopLoss, takeProfit].some(isNaN)) { alert('Заполните все поля'); return; } const riskAmount = deposit * (riskPercent / 100); const stopDiff = Math.abs(entryPrice - stopLoss); const contractSize = riskAmount / stopDiff; const profitDiff = Math.abs(takeProfit - entryPrice); const profitAmount = contractSize * profitDiff; document.getElementById('riskResult').innerHTML = `<div>Размер позиции: ${contractSize.toFixed(4)} BTC</div><div style="color: var(--color-risk)">Риск (stop): ${riskAmount.toFixed(2)} $</div><div style="color: var(--color-profit)">Профит (take-profit): ${profitAmount.toFixed(2)} $</div>`; }
    function showSection(id, e) { document.querySelectorAll('.section').forEach(s => s.classList.remove('active')); document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active')); document.getElementById(id).classList.add('active'); e.target.classList.add('active'); }
    function showModal(id) { document.getElementById(id).classList.add('active'); }
    function hideModal(id) { document.getElementById(id).classList.remove('active'); }
  </script>
</body>
</html>
